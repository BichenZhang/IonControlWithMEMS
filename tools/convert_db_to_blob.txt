/*
  These command are used to convert an older sqlite database where the pvalue column values are (partially) stored as strings to binary blobs.
  To convert, make a copy of the sqlite database file e.g. copy_of_settings.db
  > sqlite3.exe copy_of_settings.db
  > .read convert_db_to_blob.txt
  > .exit
  The final file is likely smaller than the original because all free pages are removed from the database file.
*/
CREATE TABLE tempshelve (
	category VARCHAR NOT NULL, 
	"key" VARCHAR NOT NULL, 
	pvalue BLOB, 
	PRIMARY KEY (category, "key")
);
insert into tempshelve select category, "key", cast(pvalue as blob) as pvalue from shelve;
drop table shelve;
alter table tempshelve rename to shelve;
vacuum;
vacuum;
